import requests
import time
from bs4 import BeautifulSoup


host = 'https://zona.media'

links = {'/article/2018/05/24/hunger-strike-80', '/article/2018/05/29/yunus', '/article/2018/07/03/yarovaya', '/article/2018/05/07/tzar-1312', '/article/2018/04/12/sigma-samurai-fog', '/article/2018/06/13/kudzay', '/article/2018/03/07/bravenewface', '/article/2018/08/08/kochubei', '/article/2018/03/08/omelchenko', '/article/2018/03/08/evgenia', '/article/2018/02/07/5-11-volgograd', '/article/2018/03/22/coal', '/article/2018/05/11/kapustin-otkaz', '/article/2018/06/21/meetings', '/article/2018/05/31/autist-biking', '/article/2018/09/14/thallium', '/article/2018/07/24/frolova', '/article/2018/04/17/dvortsov', '/article/2018/01/16/slava', '/article/2018/01/29/vadim', '/article/2018/05/29/lebedyan', '/article/2018/01/27/kapustin', '/article/2018/08/24/etap', '/article/2018/06/19/belousov', '/article/2018/04/02/pugats', '/article/2018/05/10/suvorovo', '/article/2018/08/03/chernaya-zhopa', '/article/2018/09/06/kadyrov', '/article/2017/12/29/psycho', '/article/2018/06/04/dolievs', '/article/2018/06/25/blogsochi', '/article/2018/01/05/schmit', '/article/2017/12/26/ali-diary', '/article/2018/03/06/burmistrov', '/article/2018/06/29/ivlev', '/card/dmitriev', '/article/2018/08/22/novoe-v', '/article/2018/02/07/zakon-takoy', '/article/2018/04/04/goryachyi-klyuch', '/article/2018/06/01/female-mutilation-05-2', '/article/2018/02/27/savinovskih', '/article/2018/06/06/lidocaine', '/article/2018/05/04/hoods', '/article/2018/09/09/spb_9/9', '/article/2018/07/27/badnews', '/article/2018/09/24/romanov-205', '/article/2018/01/31/mrzff', '/article/2018/05/23/bars-2', '/article/2018/06/07/dixi', '/article/2018/02/13/katrin', '/article/2018/08/28/savva', '/article/2018/03/05/mirimskaya', '/article/2018/01/12/oyub', '/article/2018/07/04/goldman', '/article/2018/03/15/rechkalov', '/article/2017/12/22/elban', '/article/2018/04/11/volnyi-aul', '/article/2018/08/09/GTA-sentence', '/article/2018/04/28/ugtu', '/article/2018/07/19/19-3-20-2', '/article/2018/09/20/petr', '/article/2018/07/12/oleg', '/article/2018/01/23/memo', '/article/2018/04/06/pokhodun', '/article/2018/02/21/filin', '/article/2018/07/23/alievs', '/article/2018/04/10/stevenson', '/article/2017/12/11/karomat', '/article/2018/09/06/arman', '/article/2018/08/30/salikov', '/article/2018/06/27/kazansky', '/article/2018/07/18/pravda-partizan', '/article/2018/04/10/salima', '/article/2018/02/26/03', '/article/2018/09/12/bessonov', '/article/2018/09/27/kamensk-mogilskiy', '/article/2018/03/15/subbotin', '/article/2018/08/31/riot-report-11', '/article/2018/06/20/counter', '/article/2018/03/23/!937', '/article/2018/02/22/anapa-3', '/article/2018/05/28/miss-tatarstan', '/article/2018/07/21/tsniimash-lefortovo', '/article/2017/12/20/odinze', '/article/2018/07/03/monolog-sledovatel', '/article/2018/05/16/sntsv', '/article/2018/07/09/motz', '/article/2018/06/18/aushev', '/article/2018/09/28/mg', '/article/2018/06/15/penza-prequel', '/article/2018/02/09/penza-tortures', '/article/2018/03/13/ingushetia', '/article/2018/02/23/galchenkov', '/article/2018/02/28/scrutiny', '/article/2018/09/21/yaroslavl', '/article/2018/07/27/un', '/article/2018/06/07/krekov-mohnatkin', '/article/2018/07/16/e-ingushetiya-report', '/article/2018/06/13/badnews', '/article/2018/03/29/kass-book', '/article/2018/06/21/soplyak', '/article/2018/03/20/drymanov', '/article/2017/12/07/nas-uvoliat', '/article/2018/03/01/galyashkin', '/article/2018/02/19/kass', '/article/2018/07/14/14-05-1957', '/article/2018/01/12/osipov', '/article/2018/06/26/kiyashko', '/article/2018/06/05/vkjustice', '/article/2018/04/19/filin-2', '/article/2018/07/05/konnova', '/article/2018/08/18/NaRod-282', '/article/2018/05/28/chelyabinsk-213', '/article/2018/05/25/spetsodezhda', '/article/2018/01/09/titiev', '/article/2018/01/30/ik-omon', '/article/2017/12/27/dmitriev', '/article/2018/08/15/going-home', '/article/2018/06/20/stickers', '/article/2018/03/27/maximenko', '/article/2018/04/16/krivorotov-2', '/article/2018/06/07/kolchenko', '/article/2017/12/28/just-kids', '/article/2017/12/19/hayrullina', '/article/2018/02/01/vlgrd', '/article/2017/12/25/tsik', '/article/2018/02/05/burkin', '/article/2018/09/04/chastushki', '/article/2018/07/17/pussy-echr', '/article/2018/06/29/taxi', '/article/2018/08/13/urka-bek', '/article/2018/04/03/blowlamp', '/article/2018/02/27/main-terrorist', '/article/2018/06/27/101', '/article/2018/06/15/bard', '/article/2018/02/20/alla', '/article/2018/05/03/akka', '/article/2018/09/17/siloviki-minus', '/article/2017/12/31/itogo-17', '/article/2018/04/30/klevakin-2', '/article/2018/08/03/barnaul', '/article/2018/08/10/aye', '/article/2018/04/30/tomskpesni', '/article/2018/02/06/july', '/article/2018/06/25/current-time-144', '/article/2018/08/16/nikandrov', '/article/2018/06/10/vakhapov', '/article/2018/07/03/shatrovsky', '/article/2018/03/28/saratovdia', '/article/2018/05/18/e-ingushetia', '/article/2018/01/30/terror-sizo', '/article/2018/03/02/shutovka', '/article/2018/05/31/e-ingushetia-2', '/article/2018/08/02/gorelovo', '/article/2018/05/15/moskvin', '/article/2018/09/21/tosno', '/article/2018/04/16/magomedovs', '/article/2018/04/17/Penza-press', '/article/2018/05/14/stomakhin', '/article/2018/04/05/mosru', '/article/2018/03/07/batrayev', '/article/2018/01/10/HIV-88', '/article/2018/05/17/144-05', '/article/2018/02/22/rusebola', '/article/2017/12/08/chabany', '/article/2018/07/30/oink-oink', '/article/2018/01/02/prigovori', '/article/2018/06/01/chelyabinsk-otkaznoye', '/article/2018/07/24/264', '/article/2018/06/28/dakiev', '/article/2018/08/14/vodaplus', '/article/2018/02/08/kergelesh', '/article/2018/08/17/lyaskin', '/article/2018/08/29/plant-on', '/article/2018/02/01/kacheli', '/article/2018/01/23/drymanov', '/article/2018/05/15/psygulag', '/article/2017/12/18/bars', '/article/2017/12/25/dtp', '/article/2018/07/24/kalinichenko', '/article/2018/01/31/belykh-who-is-who', '/article/2018/07/11/cherkes', '/article/2018/01/24/lamonov-best-of', '/article/2018/01/25/nikandrov-best-of', '/article/2018/03/30/velichie', '/article/2018/05/22/shapka', '/article/2018/02/15/kuku', '/article/2018/08/15/nikak', '/article/2018/07/10/shtraf_alexina', '/article/2018/10/01/bla-blo', '/article/2018/07/18/askhab', '/article/2018/01/03/26-3-17', '/article/2018/02/26/7x7', '/article/2018/04/23/gurcheva', '/article/2018/09/03/ne-zabudem', '/article/2018/09/06/3-1-2', '/article/2018/08/22/282-148', '/article/2018/06/14/bebchuk', '/article/2018/03/14/kivelidi', '/article/2018/03/08/mamochkii', '/article/2018/07/30/prosecutor', '/article/2018/02/12/oper-omsk', '/article/2018/08/07/urazovo', '/article/2017/12/14/ruki', '/article/2018/05/21/pchelintsev', '/article/2018/04/09/tagil', '/article/2018/03/16/pensa', '/article/2018/03/21/suicide', '/article/2018/04/26/torpedo', '/article/2018/08/17/glukhov', '/article/2018/06/22/kindergarten', '/article/2018/09/07/schlosberg', '/article/2018/09/25/op-70', '/article/2018/03/10/gabaev', '/article/2018/04/24/batman', '/article/2018/08/31/eat-me', '/article/2018/02/23/whatsapp', '/article/2018/06/06/mustafayev', '/article/2018/09/26/orenburg', '/article/2018/07/20/richard', '/article/2018/08/23/7x7-fine', '/article/2018/05/08/plitka', '/article/2018/05/25/marem', '/article/2017/12/15/ulyukayev', '/article/2018/02/14/ooooo', '/article/2017/12/26/gardanov', '/article/2018/04/06/nevinovat', '/article/2018/05/21/fears', '/article/2018/06/19/feb26', '/article/2018/09/05/zlomnov', '/article/2017/12/19/fsb_100', '/article/2018/07/13/sterlitamak', '/article/2018/06/09/mutsolgov', '/article/2018/09/11/satisfaction', '/article/2018/01/11/cocker', '/article/2018/06/13/grigoryants', '/article/2018/07/06/tabligi', '/article/2018/08/20/rings-2', '/article/2018/09/03/ne-pytka', '/article/2018/02/16/shakursky', '/article/2018/04/19/filinein', '/article/2018/08/15/mothers', '/article/2018/01/19/adolfych-shalygina', '/article/2018/07/26/voronezh', '/article/2018/07/10/gorbunov', '/article/2018/03/20/brothers', '/article/2018/03/12/ponkrtatov', '/article/2018/06/08/riot-report-10', '/article/2018/07/11/zelenogorsk', '/article/2018/08/23/kalugina'}

# for i in range(6, 10):
#     mediazona = requests.get(
#         '{}/_load?selector=categoryMaterials&page={}&total=906&cat_name=Тексты'.format(host, i),
#     )
#     soup = BeautifulSoup(mediazona.json()['data'][0]['html'], 'html.parser')
#     elements = soup.find_all('a')
#
#     for e in elements:
#         links.add(e.get('href'))
# print(links)

def get_site(link):
    mz = requests.get(
        '{}{}'.format(host, link)
    )
    soup2 = BeautifulSoup(mz.text, 'html.parser')
    text = ''
    for p in soup2.find_all('p')[:-6]:
        text += p.get_text()
    return text


with open('text.txt', 'w+') as f:
    for i, link in enumerate(links):
        try:
            f.write(get_site(link))
        except Exception:
            pass

        if i % 2 == 0:
            time.sleep(2)
